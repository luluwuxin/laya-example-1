function ObstaclePanelScript(t){function e(t,e){this._user.selectObstacle(t)}function s(t){var e=t.source.sourceHeight,s=t.source.sourceWidth,a=0,i=0;e/s>1.2?i=s*(a=120)/e:a=e*(i=100)/s,t.width=i,t.height=a}function a(t){this._obstacleManager.removeObstacle(t)}function i(t){this.updateObstacleItem(t)}this.updateObstacleItem=function(t){var e=this._obstacleManager.getObstacleIndex(t);-1!=e&&this.obstacleList.changeItem(e,{obstacle:t})},this.refreshObstacleList=function(){this.obstacleList.refresh()},this.init=function(){for(var t=this._obstacleManager.getObstacles(),e=0;e<t.length;e++)this.addObstacle(t[e],e,!1);this.refreshObstacleList()},this.addObstacle=function(t,e,s=!0){s?this.obstacleList.addItemAt({obstacle:t},e):this.obstacleList.array.splice(e,0,{obstacle:t}),t.registerEvent(ObjectEvent.VALUE_CHANGED,this,i)},this.clearObstacle=function(){this.obstacleList.array=[],this.refreshObstacleList()},this.removeObstacle=function(t,e){this.obstacleList.deleteItem(e)},ObstaclePanelScript.super(this),DependencesHelper.setDependences(this,t),this.obstacleList.array=[],this.obstacleList.renderHandler=new Handler(this,function(t,i){var c=t.dataSource.obstacle,l=c===this._user.getSelectedObstacle(),n=t.getChildByName("obstacleImageBox"),h=n.getChildByName("selectedMark"),r=n.getChildByName("obstacleImage"),o=t.getChildByName("nameLabel");t.getChildByName("removeButton"),null!=o&&(o.text=c.name),null!=h&&(h.visible=l),null!=r&&(r.once(Event.LOADED,this,s,[r]),r.skin=this._loadedDataManager.mapData.getObstacleImagePath(c.type),s.call(this,r)),t.on(Event.CLICK,this,e,[c]),t.on(Event.RIGHT_CLICK,this,a,[c])}),this.addButton.on(Event.CLICK,this,function(t){var e=this._obstacleManager.addDefaultObstacle(this._loadedDataManager.mapData.getDefaultObstacleType());this._user.selectObstacle(e)}),this._obstacleManager.registerEvent(ObstacleManagerEvent.ADDED,this,function(t,e,s){this.addObstacle(e,s)}),this._obstacleManager.registerEvent(ObstacleManagerEvent.REMOVED,this,function(t,e,s){this.removeObstacle(e,s)}),this._user.registerEvent(UserEvent.OBSTACLE_SELECTED,this,function(t,e,s){this.updateObstacleItem(s),this.updateObstacleItem(e)}),this.init()}Laya.class(ObstaclePanelScript,"ObstaclePanelUI",ObstaclePanelUI);