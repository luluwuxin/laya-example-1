function SetupUI(t,e){SetupUI.super(this),this.initCarConfigListUI(),this.initCarBoxUI(),this.initInventoryListUI(),this.initParameterListUI(),this.pageChooser=t,this.bannerControl=new BannerControl(t,{m_uiBanner_logo:this.m_uiBanner_logo,m_uiBanner_home:this.m_uiBanner_home,m_uiBanner_setup:this.m_uiBanner_setup,m_uiBanner_scene:this.m_uiBanner_scene,m_uiBanner_scenario:this.m_uiBanner_scenario}),this.currentCarConfigName=void 0,this.editingCarConfigName=void 0,this.client=e.on("car_config_list",this,function(){this.refreshCarConfigListUI()}).on("car_config",this,function(){this.refreshCarBoxUI(),this.refreshParameterListUI()})}Laya.class(SetupUI,"SetupUI",SetupPageUI),SetupUI.prototype.initCarConfigListUI=function(){this.m_uiCarConfigList.array=[],this.m_uiCarConfigList.on(Laya.Event.RENDER,this,function(t){var e=t.getChildByName("image"),i=t.getChildByName("label"),n=t.getChildByName("remove"),a=t.getChildByName("popupedit");e.offAll(Laya.Event.DOUBLE_CLICK),e.on(Laya.Event.DOUBLE_CLICK,this,function(){this.currentCarConfigName===i.text?this.currentCarConfigName=void 0:(this.client.loadCarConfig(i.text),this.currentCarConfigName=i.text),this.refreshCarConfigListUI()}),i.offAll(Laya.Event.DOUBLE_CLICK),i.on(Laya.Event.DOUBLE_CLICK,this,function(){a.text=i.text,a.focus=!0,a.select(),this.editingCarConfigName=i.text,this.refreshCarConfigListUI()}),a.offAll(Laya.Event.BLUR),a.on(Laya.Event.BLUR,this,function(){this.editingCarConfigName=void 0;var t=this.client.renameCarConfig(i.text,a.text);this.currentCarConfigName===i.text&&(this.currentCarConfigName=t)}),a.offAll(Laya.Event.ENTER),a.on(Laya.Event.ENTER,this,function(){this.editingCarConfigName=void 0,a.focus=!1;var t=this.client.renameCarConfig(i.text,a.text);this.currentCarConfigName===i.text&&(this.currentCarConfigName=t)}),n.offAll(Laya.Event.CLICK),n.on(Laya.Event.CLICK,this,function(){this.currentCarConfigName=void 0,this.client.removeCarConfig(i.text)})}),this.m_uiCarConfigList_AddButton.on(Laya.Event.CLICK,this,function(){this.client.addCarConfig()})},SetupUI.prototype.initCarBoxUI=function(){this.carRenderer=new CarRenderer(this.m_uiCarBox),this.carRenderer.loadCar("LayaScene_SM_Jeep_Wrangler/SM_Jeep_Wrangler.lh"),this.m_uiCarBox.on(Laya.Event.CLICK,this,function(t){this.selectInfo=this.carRenderer.select(t.stageX,t.stageY),this.refreshParameterListUI()})},SetupUI.prototype.initInventoryListUI=function(){this.m_uiInventoryList.on(Laya.Event.RENDER,this,function(t){var e=t.getChildByName("templateJson").text,i=t.getChildByName("icon");t.getChildByName("label");t.offAll(Laya.Event.MOUSE_DOWN),t.on(Laya.Event.MOUSE_DOWN,this,function(t){if(!t.indicator){var n=t.indicator=new Laya.Image(i.skin);n.x=t.stageX,n.y=t.stageY,Laya.stage.addChild(n),n.startDrag(),n.on(Laya.Event.DRAG_END,this,a),n.on(Laya.Event.MOUSE_UP,this,a)}function a(){t.indicator&&(t.indicator=void 0,n.stopDrag(),this.m_uiCarBox.hitTestPoint(n.x,n.y)&&(this.client.addSensor(JSON.parse(e)),this.client.saveCarConfig(this.currentCarConfigName)),n.destroy())}})}),this.m_uiInventoryList.array=[{label:{text:"Camera"},icon:{skin:"custom/image_inventory_camera.png"},templateJson:{text:JSON.stringify({sid:-1,type:0,x:0,y:0,z:0,roll:0,pitch:0,yaw:0,params:{fov:45,ResolutionWidth:1024,ResolutionHeight:768}})}},{label:{text:"Lidar"},icon:{skin:"custom/image_inventory_lidar.png"},templateJson:{text:JSON.stringify({sid:-1,type:1,x:0,y:0,z:0,roll:0,pitch:0,yaw:0})}},{label:{text:"Radar"},icon:{skin:"custom/image_inventory_radar.png"},templateJson:{text:JSON.stringify({sid:-1,type:2,x:0,y:0,z:0,roll:0,pitch:0,yaw:0,params:{LongRangeAzimuthFieldOfView:20,MidRangeAzimuthFieldOfView:90,VerticalFieldOfView:5,MinRange:100,LongRangeMaxRange:1e4,MidRangeMaxRange:5e3,MinRangeRate:-1e4,MaxRangeRate:1e4,LongRangeAzimuthResolution:4,MidRangeAzimuthResolution:12,VerticalResolution:10,LongRangeRangeResolution:250,MidRangeRangeResolution:125,RangeRateResolution:50,MaxNumDetections:64,UseMidRange:!0}})}}]},SetupUI.prototype.initParameterListUI=function(){this.m_uiParameterList.on(Laya.Event.RENDER,this,function(t){var e=t.getChildByName("label"),i=t.getChildByName("input");i.offAll(Laya.Event.INPUT),i.on(Laya.Event.INPUT,this,function(t){var i=this.selectObj||{};if("object"==typeof i.params&&i.params.hasOwnProperty(e.text)&&(i=i.params),"number"==typeof i[e.text]){var n=parseFloat(t.text);isFinite(n)&&(i[e.text]=n)}else"string"==typeof i[e.text]&&(i[e.text]=t.text);this.refreshCarBoxUI()}),i.offAll(Laya.Event.ENTER),i.on(Laya.Event.ENTER,this,function(t){this.client.send("car_config"),this.client.saveCarConfig(this.currentCarConfigName)}),i.offAll(Laya.Event.BLUR),i.on(Laya.Event.BLUR,this,function(t){this.client.send("car_config"),this.client.saveCarConfig(this.currentCarConfigName)})}),this.m_uiParameterList_delete.on(Laya.Event.CLICK,this,function(){this.selectInfo&&"sensor"===this.selectInfo.type&&(this.client.removeSensor(this.selectInfo.sid),this.client.saveCarConfig(this.currentCarConfigName),this.selectInfo=void 0)}),this.m_uiParameterList.array=[]},SetupUI.prototype.refreshCarConfigListUI=function(){var t=[],e=this;this.client.data.car_config_list.list.forEach(function(i){var n=i.name===e.currentCarConfigName,a=i.name===e.editingCarConfigName;t.push({label:{visible:!a,text:i.name},popupedit:{visible:a},highlight:{visible:n},remove:{visible:n}})}),this.m_uiCarConfigList.array=t},SetupUI.prototype.refreshCarBoxUI=function(){this.carRenderer.refreshCarConfig(this.client.data.car_config)},SetupUI.prototype.refreshParameterListUI=function(){var t=[];if(this.selectInfo&&"sensor"===this.selectInfo.type){var e=["sid","type","params"],i=this.selectInfo,n=this.client.data.car_config.config.find(function(t){return t.sid===i.sid});if(n)switch(this.selectObj=n,Object.entries(n).forEach(function(i){e.indexOf(i[0])>=0||t.push({label:{text:i[0]},input:{text:""+i[1]}})}),"object"==typeof n.params&&Object.entries(n.params).forEach(function(e){t.push({label:{text:e[0]},input:{text:""+e[1]}})}),n.type){case 0:this.m_uiSensorImage.skin="custom/image_sensor_camera.png";break;case 1:this.m_uiSensorImage.skin="custom/image_sensor_lidar.png";break;case 2:this.m_uiSensorImage.skin="custom/image_sensor_radar.png";break;default:this.m_uiSensorImage.skin="custom/image_sensor_type0.png"}}this.m_uiParameterList.array=t,this.m_uiParameterList_delete.visible=t.length>0,0===t.length&&(this.m_uiSensorImage.skin="custom/image_sensor_type0.png")};