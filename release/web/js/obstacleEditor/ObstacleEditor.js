var Event=laya.events.Event,ObstacleEditorEvent={USER_SAVE_CASE:"user save case",USER_CLOSE_EDITOR:"user close editor"};class ObstacleEditor extends EventObject{constructor(){super();var a=new KeyboardEventsManager,e=new ObstacleManager,t=new User(e),s=new LoadedDataManager(e,t),n={user:t,obstacleManager:e,keyboardEventsManager:a,loadedDataManager:s,historyManager:new HistoryManager(e,s,t)};DependencesHelper.setDependences(this,n)}_userWantToSaveCaseData(){this.sendEvent(ObstacleEditorEvent.USER_SAVE_CASE,this.getCaseDataJsonString())}createMainUI(a){var e=new ObstacleEditorMainPanelScript(this._dependences);a.addChild(e),e.setSaveCaseCallback(this,function(){this._userWantToSaveCaseData()}),e.setCloseCallback(this,function(){this.sendEvent(ObstacleEditorEvent.USER_CLOSE_EDITOR)})}static createDefaultCaseString(){if(null==this._obstacleEditorDefaultCaseString){var a=new ObstacleManager;this._obstacleEditorDefaultCaseString=JSON.stringify(a.toJson())}return this._obstacleEditorDefaultCaseString}loadMapData(a,e){this._loadedDataManager.loadMapData(a,e)}loadCaseData(a){this._loadedDataManager.loadCase(a)}getMapDataJsonString(){return this._loadedDataManager.getMapDataJsonString()}getCaseDataJsonString(){return this._loadedDataManager.getCaseDataJsonString()}}