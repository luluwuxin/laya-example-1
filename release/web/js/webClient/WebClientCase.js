class WebClientCase{constructor(){this.json=null,this.selectedCaseId=-1,this.sceneConfigJsons={}}_getSceneConfigString(e){if(!(e in this.sceneConfigJsons)){var t=AssetsPath.getMapConfigFilePath(e);FileHelper.readFile(t,this,function(s){""==s?logError("Load map faile. Path: [{0}]".format(t)):this.sceneConfigJsons[e]=s})}return this.sceneConfigJsons[e]}_getCaseId(e){return e.name}_createCaseName(e){for(var t=new Set,s=this.getList(),i=e+"-",n=i.length,a=0;a<s.length;a++){var r=s[a].name;if(r.substring(0,n)==i){var g=Number(r.substring(n));0==isNaN(g)&&t.add(g)}}for(a=0;;a++)if(!t.has(a))return i+a}getList(){return this.case_list.list}getIndex(e){for(var t=this.getList(),s=0;s<t.length;s++)if(this._getCaseId(t[s])==e)return s;return-1}selectCase(e){this.selectedCaseId=e}getSelectedCase(){return this.getCase(this.selectedCaseId)}getSelectedCaseId(){return this.selectedCaseId}getCase(e){var t=this.getIndex(e);return-1==t?null:this.getList()[t]}insert(e){var t=this.getIndex(this._getCaseId(e));-1==t?this.getList().push(e):this.getList()[t]=e}insertDefault(e){var t={};t.scene=e,t.name=this._createCaseName(e),t.content=ObstacleEditor.createDefaultCaseString(),t.scene_config=this._getSceneConfigString(e),this.insert(t)}removeCase(e){var t=this.getIndex(e);return-1!=t&&(e==this.selectedCaseId&&(this.selectedCaseId=-1),this.getList().splice(t,1),!0)}init(e){this.case_list=Object.assign(this.case_list||{},e)}toJson(){return this.case_list}}